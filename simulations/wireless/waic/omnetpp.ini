[General]
num-rngs = 10
check-signals = false # remove this and change modules accordingly
*.cmdenv-log-level=detail
**.result-recording-modes=default,-histogram
**.mobility.rng-0 = 1
**.wlan[*].mac.rng-0 = 7

include common.ini
include delay_testing.ini
#include avionic.ini

**.sf.timeout = 35000ms
**.macMaxBE = 5 # maximum backoff exponent should correspond to the SF timeout value

[Config HPQ]
network = HighDensity
repeat = 35
sim-time-limit = ${simLimit=800s}
warmup-period = ${warmup=500s}

*.numHosts = ${hosts = 50, 200}
*.numSinks = ${sinks = 1..5}

result-dir = HPQ 
output-vector-file = "${resultdir}/${configname}-hosts=${hosts}-sinks=${sinks}-${runnumber}.vec"
output-scalar-file = "${resultdir}/${configname}-hosts=${hosts}-sinks=${sinks}-${runnumber}.sca"

eventlog-file = "${resultdir}/${configname}-hosts=${hosts}-sinks=${sinks}#${repetition}.elog"
snapshot-file = "${resultdir}/${configname}-hosts=${hosts}-sinks=${sinks}#${repetition}.sna"
cmdenv-output-file = "${resultdir}/${configname}-hosts=${hosts}-sinks=${sinks}#${repetition}.out"
measurement-label = hosts=${hosts}-sinks=${sinks}

#**.app**.statistic-recording = true
#**.statistic-recording = false

**.radioModeFilter = true
**.listeningFilter = true
**.macAddressFilter = true

#**.radio.transmitter.power = 0.000073mW 

include waic_radio.ini

**.wrrEnabled = true
**.daoEnabled = false

**.rpl.minHopRankIncrease = 2 # speed up topology convergence

# disable Ipv6 clutter
**.ipv6.neighbourDiscovery.raEnabled = false
**.ipv6.neighbourDiscovery.skipDad = true
**.ipv6.neighbourDiscovery.addRandomDelays = true

# Ensure reliable and robust connectivity
**.channelHopping.useRandomPattern = true
**.sf.minCellChannelOffset = 39 # highest frequency for DIOs ensures reliable parent selection
**.sf.checkScheduleConsistency = false # to speed up the simulation a bit

# MSF params	
**.sf.numMinCells = 10
**.sf.maxNumCells = 100 # intuniform(10, 15)
**.sf.upperCellUsageLimit = 0.75
**.sf.lowerCellUsageLimit = 0.25
**.sf.disableHousekeeping = true
**.sf.showTxCellCount = true
**.sf.timeout = 60000ms
**.sf.maxNumCellsScalingFactor = 4 # recommended by RFC 9033
**.sf.allowAutoCellDeletion = false # to free up the schedule around sink by deleting redundant neighbors' auto cells 

include seatbelts_layout.ini

**.mobility.rotateHorizontally = false

## Apps
**.numApps = 3

*.sink[*].app[*].typename = "UdpSink"
*.sink[*].app[*].localPort = 1000 + index()
*.sink[*].app[*].startTime = ${startTime = 100}s 

*.host[*].app[*].typename = "TschUdpBasicApp"
*.host[*].app[*].destPort = 1000 + index()
*.host[*].app[*].messageLength = 50B

# Seatbelt status
*.host[*].app[0].virtualLinkId = 0 # normal prio
*.host[*].app[0].packetName = "SeatbeltApp"
*.host[*].app[0].startTime = uniform(${startTime}, ${startTime} + 10) * 1s
 
# Smoke
*.host[*].app[1].virtualLinkId = -1 # high prio
*.host[*].app[1].sendInterval = 2s
*.host[*].app[1].stopTime = this.startTime + this.sendInterval # one smoke alarm event per simulation 
*.host[*].app[1].packetName = "SmokeAlarmApp"

# Humidity
*.host[*].app[2].virtualLinkId = 1 # low prio
*.host[*].app[2].packetName = "HumidityApp"

# uncomment depending on the $numNodes param
#include hpq_50.ini
include hpq_200.ini

# disable smoke and humidity sensors on all other nodes
*.host[*].app[1].startTime = 20h
*.host[*].app[2].startTime = 20h


[Config HPQ_Off]
extends = HPQ
*.host[*].app[0].virtualLinkId = 0
*.host[*].app[1].virtualLinkId = 0
*.host[*].app[2].virtualLinkId = 0 

[Config _HPQ_Model_Verification]
network = HighDensity
warmup-period = 200s
sim-time-limit = ${simLimit = 2000s}
repeat = 50

**.sf.upperCellUsageLimit = 1.1
**.sf.lowerCellUsageLimit = -1

**.app[*].startTime = uniform(20s, 22s)
**.numApps = 3
*.sink[*].app[*].typename = "UdpSink"
*.sink[*].app[*].localPort = 1000 + index()

*.host[*].app[*].destPort = 1000 + index()
*.host[*].app[*].typename = "TschUdpBasicApp"
*.host[*].app[*].messageLength = 50B

*.host[*].app[0].virtualLinkId = -1
*.host[*].app[1].virtualLinkId = 0
*.host[*].app[2].virtualLinkId = 1

**.sf.disableHousekeeping = true
**.queueLength = 20000
**.wrrEnabled = true
**.daoEnabled = false
**.macMaxFrameRetries = 0

*.sink[0].mobility.initialX = 3m
*.sink[0].mobility.initialY = 3m
*.host[0].mobility.initialX = 4m
*.host[0].mobility.initialY = 3m
**.constraintAreaMaxX = 10m
**.constraintAreaMaxY = 10m

[Config HPQ_Model_Verification_All_Queues]
extends = _HPQ_Model_Verification
result-dir = hpq_verif
*.host[*].app[*].sendInterval = exponential(1 / ${rate = 0.05..0.3 step 0.05} * 1s)

[Config HPQ_Model_Verification_2_Queues]
extends = HPQ_Model_Verification_All_Queues
result-dir = hpq_verif_2_queues
**.app[2].startTime = 20h

[Config HPQ_Model_Verification_WRR_Effect]
extends = _HPQ_Model_Verification
result-dir = hpq_verif_wrr_effect
**.wrrWeigthBe = ${wrrBe = 1..3 step 1}
**.wrrWeigthNp = ${wrrNp = 4}

**.host[*].app[1].stopTime = ${simLimit} - 50s
**.host[*].app[2].stopTime = ${simLimit} - 50s

**.app[0].startTime = 20h
**.app[0].sendInterval = 20h
**.app[1].sendInterval = exponential((${wrrNp} + ${wrrBe})/${wrrNp} * 1s) # 4 - weight of NP traffic
**.app[2].sendInterval = exponential(1 / ${rateBe = 0.05..0.5 step 0.05} * 1s)

[Config HPQ_Model_Verification_WRR_NP_effect]
extends = _HPQ_Model_Verification
result-dir = hpq_verif_wrr_np_effect
**.app[0].startTime = 20h
**.app[0].sendInterval = 20h
**.app[1].sendInterval = exponential(1 / ${rateNp = 0.2, 0.4, 0.6} * 1s)
**.app[2].sendInterval = exponential(1 / ${rateBe = 0.05..0.4 step 0.05} * 1s)

[Config ReSA_ISM]
network = ReSA
repeat = 40
sim-time-limit = ${simtime = 3000}s
warmup-period = ${warmup = 1000}s
result-dir = ReSA  
#result-dir = ReSA_ISM # uncomment this, if no waic_radio.ini is included
**.vector-recording = true
**.app**.result-recording-modes= default
**.mac**.result-recording-modes= default
**.result-recording-modes= -

**.numDaoRetransmitAttempts = 20 # crucial to ensure that a sink can route packets downwards

include ReSA.ini

**.ipv6.neighbourDiscovery.raEnabled = false
**.ipv6.neighbourDiscovery.skipDad = true
**.ipv6.neighbourDiscovery.addRandomDelays = true

**.sf.timeout = 60000ms # tricky, should be best set dynamically

# To disable channel hopping
#**.channelHopping.pattern = "1"
#**.channelHopping.useRandomPattern = false

#**.channelHopping.blacklistedChannels = "11 12 13 17 18"

**.channelHopping.useRandomPattern = true

#**.mac.ignoreBitErrors = false # TODO: causes more problems than it solves
#**.sf.downlinkDedicated = true

**.gw*.rpl.startDelay = 10
**.nsForwardingDelay = 1s # solves extreme congestion during IPv6 neighbour discovery  

# no need for DAOs except from the destinations we're routing to - analytic modules
# AND the sources of important data - smoke alarms
*.am*[*].rpl.daoEnabled = true
#*.sos*[*].rpl.daoEnabled = true

# force nodes to continuously retry uplink cell scheduling
#**sos**.sf.scheduleUplinkManually = true

**.daoEnabled = false

*.sos*[*].app[0].startTime = uniform(${warmup}s + 200s, ${simtime}s - 500s)
*.sos*[*].app[0].sendInterval = ${simtime}s

**.app[*].startTime = uniform(${warmup} - 1, ${warmup}) * 1s

*.sos*[*].app[0].startTime.param-record-as-scalar = true

[Config ReSA]
extends = ReSA_ISM
include waic_radio.ini
**.sf.minCellChannelOffset = 39 # highest frequency for DIOs ensures reliable parent selection

[Config ReSA_Hash]
extends = ReSA
**.sf.useHashChOffsets = true

[Config ReSA_Downlink_Optimization]
extends = ReSA
#**.sf.lowerCellUsageLimit = -1 # avoid removing specially provisioned downlink cells
**am**.rpl.downlinkRequired = true

[Config ReSA_Cell_Bundling]
extends = ReSA_Altimeter
**.sf.cellBundlingEnabled = true
**.sf.lowerCellUsageLimit = -1 # avoid removing bundling cell pairs

[Config ReSA_Cell_Bundling_Dynamic]
extends = ReSA_Altimeter
**.sos*.rpl.uplinkRequired = true
**.sos*.rpl.daoEnabled = true
**.sos*.**.sf.cellBundlingEnabled = true
**.sos*.**.sf.lowerCellUsageLimit = -1

**.sf.handleCellBundlingSignal = true

[Config ReSA_Cell_Bundling_Dynamic_Downlink]
extends = ReSA_Cell_Bundling_Dynamic
**am**.rpl.downlinkRequired = true

[Config ReSA_Cell_Bundling_Ultimate]
extends = ReSA_Cell_Bundling_Dynamic_Downlink
*.gw*[*].app[0].virtualLinkId = -2
*.sos*[*].app[0].virtualLinkId = -2
result-dir = ReSA_WAIC_Ultimate

[Config ReSA_Ultimate_ISM]
extends = ReSA_HPQ
**sos**.sf.scheduleUplinkManually = true
**.sos*.rpl.daoEnabled = true
#**.sos*.**.sf.cellBundlingEnabled = true
#**.sf.cellBundleSize = 1
#**.sf.handleCellBundlingSignal = true

[Config ReSA_Cell_Bundling_Dynamic_Daisy_Chained]
extends = ReSA_Cell_Bundling_Dynamic, ReSA_Low_Latency

[Config ReSA_Cell_Bundling_Dynamic_Daisy_Chained_Uplink]
extends = ReSA_Altimeter_Uplink
**.sos*.rpl.uplinkRequired = true
**.sos*.**.sf.cellBundlingEnabled = true
**.sf.handleCellBundlingSignal = true
**.lowLatencyMode = true

[Config ReSA_Altimeter_Low_Latency_Uplink]
extends = ReSA_Altimeter_Uplink
**.lowLatencyMode = true

[Config ReSA_Cell_Bundling_Uplink]
extends = ReSA_Altimeter_Uplink
**.sf.cellBundlingEnabled = true
**.sf.lowerCellUsageLimit = -1 # avoid removing bundling cell pairs

[Config ReSA_Cell_Bundling_Dynamic_Uplink]
extends = ReSA_Altimeter_Uplink
result-dir = ReSA_Cell_Bundling_Dynamic_Uplink
**.sos*.rpl.uplinkRequired = true
**.sos*.**.sf.cellBundlingEnabled = true
**.sf.handleCellBundlingSignal = true

[Config ReSA_Cell_Bundling-2]
extends = ReSA_Altimeter_Uplink_2

[Config ReSA_CSMA]
extends = ReSA
**.wlan[*].typename = "Ieee802154NarrowbandInterface"
**.wlan[*].mac.typename = "Ieee802154NarrowbandMac"
**.radioMedium.typename = "Ieee802154NarrowbandDimensionalRadioMedium"

[Config ReSA_CSMA_ISM]
extends = ReSA_ISM
**.wlan[*].typename = "Ieee802154NarrowbandInterface"
**.wlan[*].mac.typename = "Ieee802154NarrowbandMac"
**.radioMedium.typename = "Ieee802154NarrowbandDimensionalRadioMedium" 

[Config ReSA_CSMA_Altimeter]
result-dir = ReSA_Altimeter
## This config requires modified INET radio and 802154Mac files to run properly, 
## but it's not clear, whether CSMA behavior is affected 
extends = ReSA_CSMA, ReSA_Altimeter

[Config ReSA-CLX]
extends = ReSA
result-dir=ReSA-CLX
**.sf.typename = "TschCLSF"
**.rpl.crossLayerEnabled = true
**.rpl.clPhase2Timeout = ${warmup} - 200

**.rpl.sinkNeighborWeight = 1.5

[Config ReSA_HPQ]
extends = ReSA
*.gw*[*].app[0].virtualLinkId = -2
*.sos*[*].app[0].virtualLinkId = -2

[Config ReSA_Low_Latency]
extends = ReSA
**.lowLatencyMode = true

[Config ReSA_Low_Latency_Downlink_Optimization]
extends = ReSA_Downlink_Optimization, ReSA_Low_Latency

[Config ReSA_Ultimate]
extends = ReSA_Downlink_Optimization, ReSA_Low_Latency, ReSA_HPQ

[Config ReSA_Ultimate_Dynamic_Cell_Bundling]
extends = ReSA_Downlink_Optimization, ReSA_Low_Latency, ReSA_HPQ, ReSA_Cell_Bundling_Dynamic

[Config ReSA_Ultimate_Dynamic_Cell_Bundling_2]
extends = ReSA_Ultimate_Dynamic_Cell_Bundling
**.macSlotframeSize = 53

[Config ReSA_Ultimate_Dynamic_Cell_Bundling_2_2]
extends = ReSA_Ultimate_Dynamic_Cell_Bundling
result-dir = ReSA_Ultimate_Dynamic_Cell_Bundling_2_2
**.macSlotframeSize = 51
**.cellBundleSize = 3

[Config ReSA_Ultimate_Dynamic_Cell_Bundling_2_3]
extends = ReSA_Ultimate_Dynamic_Cell_Bundling
result-dir = ReSA_Ultimate_Dynamic_Cell_Bundling_2_3
**.macSlotframeSize = 43

[Config ReSA_Ultimate_Cell_Bundling]
extends = ReSA_Cell_Bundling, ReSA_Downlink_Optimization, ReSA_HPQ

[Config ReSA_Low_Latency-HPQ]
extends = ReSA_Low_Latency, ReSA_HPQ

## EXTRA PARAMS ONLY FOR ISM BAND
#**.lowLatencyStartingOffset = 10
#**sos**.sf.scheduleUplinkManually = true # to ensure dedicated cell
#**sos**.sf.blacklistSlots = true # to avoid blind guessing of available slot offsets at the parent

[Config ReSA_Uplink]
extends = ReSA
result-dir= ReSA_Uplink

*.gw*[*].app[0].typename = "UdpSink"
*.sos*[*].app[0].typename = "TschUdpBasicApp"

[Config ReSA_Uplink-HPQ]
extends = ReSA_Uplink, ReSA_HPQ

[Config ReSA_Uplink-HPQ-Low-Latency]
extends = ReSA_Uplink, ReSA_HPQ
**.lowLatencyMode = true

[Config ReSA_Uplink-CLX]
extends = ReSA_Uplink, ReSA-CLX

[Config ReSA-No-Random-Delays]
extends = ReSA_HPQ
result-dir = ReSA-No-Random-Delays

**.nsForwardingDelay = 0
**.ipv6.neighbourDiscovery.addRandomDelays = false

[Config ReSA-No-Random-Delays-CLX]
extends = ReSA-CLX

result-dir = ReSA-No-Random-Delays

**.nsForwardingDelay = 0
**.ipv6.neighbourDiscovery.addRandomDelays = false

*.gw*[*].app[0].virtualLinkId = -2
*.sos*[*].app[0].virtualLinkId = -2

[Config ReSA_Seatbelts]
extends = ReSA
result-dir = ReSA_Seatbelts

**.numHosts = ${hosts = 100} # number of seatbelts, should always come before seatbelts_layout.ini
**.numSinks = ${sinks = 1} # dummy variable required for compatibility with how HPQ uses seat belt layout

output-vector-file = "${resultdir}/${configname}-hosts=${hosts}-sinks=${sinks}-${runnumber}.vec"
output-scalar-file = "${resultdir}/${configname}-hosts=${hosts}-sinks=${sinks}-${runnumber}.sca"
eventlog-file = "${resultdir}/${configname}-hosts=${hosts}-sinks=${sinks}#${repetition}.elog"
snapshot-file = "${resultdir}/${configname}-hosts=${hosts}-sinks=${sinks}#${repetition}.sna"
cmdenv-output-file = "${resultdir}/${configname}-hosts=${hosts}-sinks=${sinks}#${repetition}.out"
measurement-label = "hosts=${hosts}-sinks=${sinks}"

include seatbelts_layout.ini
include seatbelts_app.ini

# setting to false speeds up the simulation, 
# but it's also worth running all repetitions at least once with "true"
**.checkScheduleConsistency = false

# to free up the space for dedicated cell scheduling, use cautiously has considerable drawbacks
#**.allowAutoCellDeletion = true

*.host[*].**.sf.scheduleUplinkOnJoin = false # free up scheduling bandwidth near the sink

**sos**.sf.scheduleUplinkManually = true # to ensure repeated attempts at dedicated cell scheduling
**sos**.sf.blacklistSlots = true # to avoid blind guessing of available slot offsets at the parent

[Config ReSA_CSMA_Seatbelts]
extends = ReSA_CSMA, ReSA_Seatbelts

[Config ReSA_Seatbelts_Uplink]
extends = ReSA_Seatbelts, ReSA_Uplink
result-dir = ReSA_Seatbelts_Uplink

[Config ReSA_Seatbelts_HPQ]
extends = ReSA_Seatbelts, ReSA_HPQ

[Config ReSA_Seatbelts_HPQ_Uplink]
extends = ReSA_Seatbelts_Uplink, ReSA_HPQ

[Config ReSA_Seatbelts_Infq]
extends = ReSA_Seatbelts
result-dir = ReSA_Seatbelt_Inf_Queue
**.queueLength = 9000

[Config ReSA_Seatbelts_Infq_HPQ]
result-dir = ReSA_Seatbelt_Inf_Queue
extends = ReSA_Seatbelts_Infq, ReSA_HPQ

[Config ReSA_Seatbelts_Infq_Uplink]
extends = ReSA_Seatbelts_Infq, ReSA_Uplink

[Config ReSA_Seatbelts_Infq_Uplink_HPQ]
extends = ReSA_Seatbelts_Infq_HPQ, ReSA_Uplink

[Config _Altimeter]
**.radioMedium.analogModel.typename = "WaicDimensionalAnalogModel"
**.T_chirp = ${tChirp = 0.02}
**.RA_OffSet="0.00s"
# TODO: adjust these to a meaningful location for your particular scenario
**.AltimeterLocations="(7.62,1.4,5.4)m (8.13,1.4,5.4)m"
**.f_chirp_max = 4300.0e6
**.am1[*].app**.result-recording-modes = default
**.result-recording-modes= -

[Config ReSA_Altimeter]
extends = ReSA, _Altimeter

# TODO: ensure proper directory name based on the chirp period
result-dir = ReSA_altimeter_T_20_ms

**sos**.sf.scheduleUplinkManually = true # to ensure dedicated cell
**sos**.sf.blacklistSlots = true # to avoid blind guessing of available slot offsets at the parent

[Config SlotHopping]
extends = DelayTest_DD1, _Altimeter

# synchronizing altimeter with the slotframe, chirp period should be divisor of the slotframe length
**.macSlotframeSize = 100

# TODO: put your other slot hopping params here


[Config ReSA_Altimeter_Downlink]
extends = ReSA_Altimeter
**am**.rpl.downlinkRequired = true

[Config ReSA_Ultimate_Altimeter]
extends = ReSA_Altimeter, ReSA_Ultimate
result-dir = ReSA_WAIC_Ultimate

[Config ReSA_Ultimate_Altimeter_2]
extends = ReSA_Ultimate_Altimeter
**.macSlotframeSize = 53

[Config ReSA_Ultimate_Altimeter_3]
extends = ReSA_Ultimate_Altimeter
**.macSlotframeSize = 40

[Config ReSA_Altimeter_2]
extends = ReSA_Altimeter
**.RA_OffSet="0.01s"

[Config ReSA_Altimeter_Uplink]
extends = ReSA_Altimeter, ReSA_Uplink

[Config ReSA_Altimeter_Uplink_2]
extends = ReSA_Altimeter_2, ReSA_Uplink

[Config ReSA_Altimeter_Low_Latency_HPQ]
extends = ReSA_Altimeter, ReSA_HPQ
**.lowLatencyMode = true

[Config ReSA_Altimeter_Uplink_Low_Latency_HPQ]
extends = ReSA_Altimeter_Low_Latency_HPQ, ReSA_Uplink

[Config ReSA_Altimeter-Seatbelts]
extends = ReSA_Seatbelts, ReSA_Altimeter

[Config ReSA_Low_Latency_Seatbelts]
extends = ReSA_Seatbelts, ReSA_Low_Latency

**.minHopRankIncrease = 10 # disabled parent changing for better traceability
*.host[*].**.sf.scheduleUplinkOnJoin = false # free up some bandwidth near the sink

[Config ReSA_Low_Latency_Uplink]
extends = ReSA_Uplink, ReSA_Low_Latency

[Config ReSA_Seatbelts_Uplink_Low_Latency]
extends = ReSA_Low_Latency_Seatbelts, ReSA_Uplink

[Config ReSA_ISM-NoBitError]
extends = ReSA_ISM
result-dir=ReSA_ISM-NoBitError
**.mac.ignoreBitErrors = true

[Config ReSA_ISM-HPQ]
extends = ReSA_ISM
result-dir=ReSA_ISM-HPQ1
*.gw*[*].app[0].virtualLinkId = -2
*.sos*[*].app[0].virtualLinkId = -2

[Config ReSA_ISM-HPQ-NoBitError]
extends = ReSA_ISM-HPQ, ReSA_ISM-NoBitError
result-dir=ReSA_ISM-HPQ-NoBitError

[Config ReSA_ISM-Seatbelts]
extends = ReSA_ISM
result-dir =  ReSA_ISM-Seatbelts
**.numHosts = ${hosts = 198} # seatbelts
**.numSinks = ${sinks = 1} # seatbelts

# set to "false" to speed up the simulation, worth running all repetitions at least once with "true"
**.checkScheduleConsistency = false

**.allowAutoCellDeletion = true # to free up the space for dedicated cell scheduling, has considerable drawbacks

include seatbelts_layout.ini
include seatbelts_app.ini

# seatbelt grid orients itself around gateway location, which is
# supposed to be in the middle of the aircraft, but is, in fact, a bit shifted

**.host[*].rpl.daoEnabled = false # no downlink traffic for seatbelts is needed

# to disperse a bit the neighborhood around the sink, TODO: make dynamic, or synthesise into objective function 
**.host[*].rpl.joinAtSinkPowerThresh = 2 #pW

**sos**.sf.scheduleUplinkManually = true # to ensure dedicated cell
**sos**.sf.blacklistSlots = true # to avoid blind guessing of available slot offsets at the parent

[Config ReSA_ISM-HPQ-Seatbelts]
extends = ReSA_ISM-Seatbelts, ReSA_ISM-HPQ
result-dir=ReSA_ISM-HPQ-Seatbelts

[Config ReSA_ISM-Improved]
extends = ReSA_ISM
result-dir=ReSA_ISM-Improved

# set to "false" to speed up the simulation, worth running all repetitions at least once with "true"
**.checkScheduleConsistency = false

**.allowAutoCellDeletion = true # to free up the space for dedicated cell scheduling, has considerable drawbacks

**sos**.sf.scheduleUplinkManually = true # to ensure dedicated cell
**sos**.sf.blacklistSlots = true # to avoid blind guessing of available slot offsets at the parent

[Config ReSA_ISM_Interference]
extends = ReSA_ISM
result-dir = ReSA_ISM_Interference
output-scalar-file = ${resultdir}/${configname}_AUR=${activeUserRatio}_${repetition}.sca
output-vector-file = ${resultdir}/${configname}_AUR=${activeUserRatio}_${repetition}.vec
eventlog-file = ${resultdir}/${configname}_AUR=${activeUserRatio}_${repetition}.elog
snapshot-file = ${resultdir}/${configname}_AUR=${activeUserRatio}_${repetition}.sna
cmdenv-output-file = ${resultdir}/${configname}_AUR=${activeUserRatio}_${repetition}.out

measurement-label = aur=${activeUserRatio}

# comment these out if more in-depth analysis is required
**.am1**.app**.result-recording-modes = default
**.result-recording-modes= -

**.numUsers = ${numUsers = 198} # set numUsers to 0 in order to disable
include ism_interference.ini

*.user*[*].app[1].activeUserRatio = ${activeUserRatio = 0.4}

# to speed up the simulations a little
**.radioModeFilter = true
#**.macAddressFilter = true
**.checkScheduleConsistency = false

[Config _ReSA_Coexistence]
**.numAircrafts = 2
**.enableObstacles = true
**.obstacleLoss.typename = "ReSAObstacleLoss"
**.physicalEnvironment.config = xmldoc("ReSA_obstacles.xml")
**.displayIntersections = true

[Config ReSA_Broadcast_Alarm]
extends = ReSA_ISM
*.am*[*].app[0].typename = "ResaSmokeUdpSink"
*.am*[*].app[0].receiveBroadcast = true
*.am*[*].app[0].localPort = 4
*.am*[*].app[0].multicastGroup = "ff02::1"

*.sos*[*].app[0].typename = "UdpBasicApp"
*.sos*[*].app[0].startTime = ${sosStart = uniform($warmup + 200, $simtime - 500) * 1s}
# should be really low to quickly queue "copies" of the same packet 
# and lessen the impact on end-to-end delay we're trying to evaluate here
*.sos*[*].app[0].sendInterval = ${sosInterval = 0.001s}
*.sos*[*].app[0].stopTime = this.startTime + ${sosInterval} * ${r = 3}
*.sos*[*].app[0].destAddresses = "ff02::1"
*.sos*[*].app[0].destPort = 4

**.radio.transmitter.power = 0.1mW # originally 0.05 mW

[Config ReSA_Broadcast_Alarm_CSMA]
extends = ReSA_Broadcast_Alarm, ReSA_CSMA_ISM

[Config ReSA_ISM_Case_1]
description = WiFi APs using channels 1, 6 and 11 incur highest inteference for ReSA sensors 
extends = ReSA_ISM_Interference, ReSA_Broadcast_Alarm
**.channelHopping.blacklistedChannels = "11 12 13 14 16 17 18 19 21 22 23 24"

[Config ReSA_ISM_Case_1_CSMA]
extends = ReSA_ISM_Interference, ReSA_Broadcast_Alarm_CSMA
result-dir = ReSA_ISM_Case_1_CSMA

[Config ReSA_ISM_Case_1_CSMA_MAC_Filter]
extends = ReSA_ISM_Case_1_CSMA
**.macAddressFilter = true

[Config ReSA_ISM_Case_3]
description = WiFi APs using channel 1 incur highest interference for CSMA, but also free most 15.4 channels for TSCH hopping
extends = ReSA_ISM_Interference, ReSA_Broadcast_Alarm 
**.channelHopping.blacklistedChannels = "11 12 13 14"

*.ap*[*].wlan[*].radio.channelNumber = 0

[Config ReSA_ISM_Case_3_CSMA]
extends = ReSA_ISM_Interference, ReSA_Broadcast_Alarm_CSMA
*.ap*[*].wlan[*].radio.channelNumber = 0


